version: {branch}-{build}
configuration: Release
platform: Any CPU
assembly_info:
  patch: true
  file: '**\AssemblyInfo.*'
  assembly_version: '{version}'
  assembly_file_version: '{version}'
  assembly_informational_version: '{version}'
build:
  project: batocera-ports.sln
  verbosity: minimal
after_build:
- cmd: >-
  copy EmulationStation\emulatorLauncher.exe .
  7z a emulatorlauncher.zip emulatorLauncher.exe
  copy EmulationStation\EmulatorLauncher.Common.dll .
  7z a emulatorlauncher.zip EmulatorLauncher.Common.dll
  copy EmulationStation\batocera-retroachievements-info.exe .
  7z a emulatorlauncher.zip batocera-retroachievements-info.exe
  copy EmulationStation\batocera-systems.exe .
  7z a emulatorlauncher.zip batocera-systems.exe
  copy EmulationStation\batocera-store.exe .
  7z a emulatorlauncher.zip batocera-store.exe
  copy EmulationStation\es-checkversion.exe .\es-checkversion-test.exe
  7z a emulatorlauncher.zip es-checkversion-test.exe
  copy EmulationStation\es-update.exe .\es-update-test.exe
  7z a emulatorlauncher.zip es-update-test.exe
  copy EmulationStation\mount.exe .
  7z a emulatorlauncher.zip mount.exe
  7z a emulatorlauncher.zip 7za.exe
  7z a emulatorlauncher.zip 7za.dll
  7z a emulatorlauncher.zip 7zxa.dll
  7z a emulatorlauncher.zip Newtonsoft.Json.dll
  7z a emulatorlauncher.zip unzip.exe
  7z a emulatorlauncher.zip unzip32.dll
  7z a emulatorlauncher.zip pdftoppm.exe
  7z a emulatorlauncher.zip pdfinfo.exe
  7z a emulatorlauncher.zip rdsquashfs.exe
  7z a emulatorlauncher.zip liblzma.dll
  7z a emulatorlauncher.zip liblzo2-2.dll
  7z a emulatorlauncher.zip libsquashfs.dll
  7z a emulatorlauncher.zip libzstd.dll
  7z a emulatorlauncher.zip xbox-iso-vfs.exe
  7z a emulatorlauncher.zip 7z.exe
  7z a emulatorlauncher.zip 7z.dll
  7z a emulatorlauncher.zip EmulationStation\.emulationstation\es_features.cfg
artifacts:
- path: emulatorlauncher.zip
deploy:
- provider: GitHub
  tag: projectarcade-el
  release: ProjectArcade emulatorLauncher $(APPVEYOR_BUILD_VERSION)
  description: #ProjectArcade emulatorLauncher $(APPVEYOR_BUILD_VERSION) ###This release was automatically compiled and published by the AppVeyor service
  auth_token:
    secure: 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
  force_update: true